<!DOCTYPE html>
<html lang="en">
<head>
    <title>Document</title>
    <style>
        .center{
          margin: auto;
          width: 60%;
          border: 3px solid #000;
          padding: 10px;  
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>

    <div align="center">
        <h1>Regi</h1>
        <div class="center">
            <form action='regiAf' method='post'>
                <table border="1">
                    <tr>
                        <th>ID</th>
                        <td>
                            <input type="text" name="id" size="20">
                            <p id="idCheck" style="font-style: 8px;"></p>
                            <input type="button" id="idBtn" value="id확인">
                        </td>
                    </tr>
                    <tr>
                        <th>password</th>
                        <td>
                            <input type="password" name="pwd" size="20">
                        </td>
                    </tr>
                    <tr>
                        <th>name</th>
                        <td>
                            <input type="text" name="name" size="20">
                        </td>
                    </tr>
                    <tr>
                        <th>email</th>
                        <td>
                            <input type="text" name="email" size="20">
                        </td>
                    </tr>
                    <tr>
                        <th colspan="2">
                            <input type="submit" value="가입하기">
                            <button type="button" onclick="location.href='login'">로그인화면</button>
                        </th>
                    </tr>
                </table>
            </form>
        </div>
    </div>
    
    <script>
        $(document).ready(()=>{
            $('#idBtn').click(()=>{
                $.ajax({
                    url:'./idcheck',
                    data:'id='+$('input[name=id]').val(),
                    type:'post',
                    success: data=>{

                        alert(data.result);
                        if( data.result == 'YES'){
                            $('#idCheck').css('color', 'blue').text('사용가능한 아이디')
                        }else{
                            $('#idCheck').css('color', 'red').text('사용 불가능한 아이디')
                            $('input[name=id]').val('')
                        }

                    },err: err =>{
                        alert('error')
                        console.log(err)
                    }
                })
                
            })






        })
    </script>



</body>
</html>